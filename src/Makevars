$(info The compilation root directory is: $(ROOT_DIR))
$(info The name of the shared library to be created is: $(SHLIB))

CXX_STD= CXX11
# use the same settings as for cppGoslin
PKG_CXXFLAGS= -std=c++11 -Wall -fPIC -O3
$(info The CXX flags are: $(PKG_CXXFLAGS))

# add the subdirectory to the linker / library path
CPP_GOSLIN_DIR = ./cppgoslin
# include header locations to compile goslin.cpp against
PKG_CPPFLAGS= -I"." -I"./cppgoslin" -I"./cppgoslin/cppgoslin" -I"./cppgoslin/cppgoslin/domain" -I"./cppgoslin/cppgoslin/parser"

PKG_LIBS= -L$(CPP_GOSLIN_DIR) -lcppGoslin

$(SHLIB): build_goslin $(OBJECTS)

# we generate some custom files with make and also compile a shared library, thus call it from here
build_goslin: 
	(cd cppgoslin; $(MAKE))

all: $(SHLIB)